openapi: 3.0.3
info:
  title: Microservicio de Productos
  description: |
    Microservicio para obtener productos de la tienda.
  version: 1.0.0
  contact:
    name: Grupo 11
    email: grupo11@example.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:8083
    description: Servidor de desarrollo local
  - url: https://api.tienda.com
    description: Servidor de producción

paths:
  /producto:
    get:
      summary: Obtener todos los productos
      description: Retorna una lista de todos los productos disponibles en el sistema
      operationId: getProductosAll
      tags:
        - Productos
      responses:
        '200':
          description: Lista de productos obtenida exitosamente
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Producto'
              example:
                - productoId: 1
                  sku: "PROD-001"
                  nombre: "Laptop Dell Inspiron"
                  descripcion: "Laptop de 15 pulgadas con procesador Intel i5"
                  precio: 899.99
                  cantidadStock: 25
                  creadoEn: "2024-01-15T10:30:00Z"
                  actualizadoEn: "2024-01-20T14:45:00Z"
                - productoId: 2
                  sku: "PROD-002"
                  nombre: "Mouse Inalámbrico"
                  descripcion: "Mouse inalámbrico ergonómico con sensor óptico"
                  precio: 29.99
                  cantidadStock: 100
                  creadoEn: "2024-01-10T09:15:00Z"
                  actualizadoEn: "2024-01-18T16:20:00Z"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                timestamp: "2024-01-25T12:00:00Z"
                status: 500
                error: "Internal Server Error"
                message: "Error al procesar la solicitud"
                path: "/producto"

  /producto/{id}:
    get:
      summary: Obtener producto por ID
      description: Retorna un producto específico basado en su ID
      operationId: getProducto
      tags:
        - Productos
      parameters:
        - name: id
          in: path
          required: true
          description: ID único del producto
          schema:
            type: integer
            format: int64
            minimum: 1
          example: 1
      responses:
        '200':
          description: Producto encontrado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Producto'
              example:
                productoId: 1
                sku: "PROD-001"
                nombre: "Laptop Dell Inspiron"
                descripcion: "Laptop de 15 pulgadas con procesador Intel i5, 8GB RAM, 256GB SSD"
                precio: 899.99
                cantidadStock: 25
                creadoEn: "2024-01-15T10:30:00Z"
                actualizadoEn: "2024-01-20T14:45:00Z"
        '404':
          description: Producto no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                timestamp: "2024-01-25T12:00:00Z"
                status: 404
                error: "Not Found"
                message: "Producto con ID 999 no encontrado"
                path: "/producto/999"
        '400':
          description: ID de producto inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                timestamp: "2024-01-25T12:00:00Z"
                status: 400
                error: "Bad Request"
                message: "ID de producto debe ser un número válido"
                path: "/producto/abc"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

components:
  schemas:
    Producto:
      type: object
      description: Modelo de datos para un producto
      properties:
        productoId:
          type: integer
          format: int64
          description: ID único del producto
          example: 1
        sku:
          type: string
          maxLength: 50
          description: Código SKU único del producto
          example: "PROD-001"
        nombre:
          type: string
          maxLength: 150
          description: Nombre del producto
          example: "Laptop Dell Inspiron"
        descripcion:
          type: string
          description: Descripción detallada del producto
          example: "Laptop de 15 pulgadas con procesador Intel i5, 8GB RAM, 256GB SSD"
        precio:
          type: number
          format: decimal
          description: Precio del producto
          minimum: 0
          example: 899.99
        cantidadStock:
          type: integer
          format: int64
          description: Cantidad disponible en stock
          minimum: 0
          example: 25
        creadoEn:
          type: string
          format: date-time
          description: Fecha y hora de creación del producto
          example: "2024-01-15T10:30:00Z"
        actualizadoEn:
          type: string
          format: date-time
          nullable: true
          description: Fecha y hora de la última actualización del producto
          example: "2024-01-20T14:45:00Z"
      required:
        - sku
        - nombre
        - precio
        - cantidadStock
        - creadoEn

    Error:
      type: object
      description: Modelo de error estándar
      properties:
        timestamp:
          type: string
          format: date-time
          description: Fecha y hora del error
          example: "2024-01-25T12:00:00Z"
        status:
          type: integer
          description: Código de estado HTTP
          example: 404
        error:
          type: string
          description: Tipo de error
          example: "Not Found"
        message:
          type: string
          description: Mensaje descriptivo del error
          example: "Producto no encontrado"
        path:
          type: string
          description: Ruta de la solicitud que causó el error
          example: "/producto/999"
      required:
        - timestamp
        - status
        - error
        - message
        - path

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Token JWT para autenticación

tags:
  - name: Productos
    description: Operaciones relacionadas con la gestión de productos
